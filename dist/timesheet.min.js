!function(){"use strict";Date.prototype.diff=function(date2){var timeDiff=Math.abs(this.getTime()-date2.getTime());return Math.ceil(timeDiff/864e5)},Date.prototype.toString=function(){var monthNames=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];return this.getDate()+"/"+monthNames[this.getMonth()]},Date.prototype.addDays=function(days){var dat=new Date(this.valueOf());return days>0&&dat.setDate(dat.getDate()+days),dat};var Timesheet=function(container,min,max,data){this.data=[],this.dateRange={min:min,max:max},this.parse(data||[]),"undefined"!=typeof document&&(this.container="string"==typeof container?document.querySelector("#"+container):container,this.drawSections(),this.insertData())};Timesheet.prototype.daysRange=function(){return this.dateRange.min.diff(this.dateRange.max)},Timesheet.prototype.insertData=function(){for(var html=[],sectionCSSWidth=47,n=0,m=this.data.length;n<m;n++){var cur=this.data[n],bubble=this.createBubble(sectionCSSWidth,this.dateRange.min,cur.start,cur.end),line=['<span style="margin-left: '+bubble.getStartOffset()+"px; width: "+bubble.getWidth()+'px;" class="bubble bubble-'+(cur.category||"default")+'" data-duration="'+(cur.end?Math.round((cur.end-cur.start)/1e3/60/60/24/39):"")+'"></span>','<span class="date">'+bubble.getDateLabel()+"</span> ",'<span class="label">'+cur.label+"</span>"].join("");html.push("<li>"+line+"</li>")}this.container.innerHTML+='<ul class="data">'+html.join("")+"</ul>"},Timesheet.prototype.drawSections=function(){for(var html=[],differenceInDays=this.daysRange(),i=0;i<=differenceInDays;i++){var day=this.dateRange.min.addDays(i);html.push("<section>"+day+"</section>")}this.container.className="timesheet color-scheme-default",this.container.innerHTML='<div class="scale">'+html.join("")+"</div>"},Timesheet.prototype.parse=function(data){for(var n=0,m=data.length;n<m;n++){var current=data[n];current.start<this.dateRange.min&&(this.dateRange.min=current.start),current.end&&current.end>this.dateRange.max?this.dateRange.max=current.end:current.start>this.dateRange.max&&(this.dateRange.max=current.start),this.data.push(current)}},Timesheet.prototype.createBubble=function(sectionWidth,min,start,end){return new Bubble(sectionWidth,min,start,end)};var Bubble=function(sectionsWidth,min,start,end){this.min=min,this.start=start,this.end=end,this.sectionsWidth=sectionsWidth};Bubble.prototype.getStartOffset=function(){return this.sectionsWidth*this.start.diff(this.min)},Bubble.prototype.getDays=function(){return this.start.diff(this.end)},Bubble.prototype.getWidth=function(){return this.sectionsWidth*this.getDays()},Bubble.prototype.getDateLabel=function(){return[this.start,this.end].join("->")},window.Timesheet=Timesheet}();